<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô - ‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏Æ‡∏≤‡∏ö‡∏µ‡∏ü</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/backoffice.css">
    <style>
        /* Notification Bell - sits inside .red-hero */
        .red-hero {
            position: relative;
        }

        #noti-button {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            z-index: 10;
        }

        #noti-panel {
            position: fixed;
            top: 112px;
            right: 15px;
            z-index: 1002;
        }

        @media (min-width: 481px) {
            #noti-panel {
                right: calc(50% - 210px + 15px);
            }
        }
    </style>
</head>

<body>
    <!-- ===== ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå ===== -->
    <div id="page-orders" class="page active">
        <div class="top-bar">
            <span class="top-bar-title">‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</span>
        </div>
        <div class="red-hero">
            <h1>‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏Æ‡∏≤‡∏ö‡∏µ‡∏ü</h1>
            <div class="noti-btn" onclick="toggleNotiPanel()"
                style="background:rgba(255,255,255,0.25); width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; position:absolute; top:50%; right:15px; transform:translateY(-50%); z-index:10;">
                <span style="font-size:1.4rem; text-shadow:0 1px 2px rgba(0,0,0,0.2);">üîî</span>
                <span class="noti-badge"
                    style="display:none; position:absolute; top:-2px; right:-2px; background:#4CAF50; color:#fff; font-size:0.65rem; font-weight:bold; height:18px; min-width:18px; border-radius:9px; padding:0 4px; align-items:center; justify-content:center; border:2px solid #388E3C;">0</span>
            </div>
        </div>

        <!-- Mode Toggle -->
        <div class="view-toggle-bar">
            <button id="btn-grid-mode" class="view-toggle-btn active" onclick="setViewMode('grid')">ü™ë ‡πÇ‡∏ï‡πä‡∏∞</button>
            <button id="btn-list-mode" class="view-toggle-btn" onclick="setViewMode('list')">üìã ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
        </div>

        <div class="page-body">
            <!-- Table Grid -->
            <div id="table-grid" class="table-grid" style="display:grid;"></div>

            <!-- Order List (hidden by default) -->
            <div id="order-list-view" style="display:none; padding: 12px 14px;"></div>
        </div>
    </div>

    <!-- ===== ‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ===== -->
    <div id="page-payment" class="page">
        <div class="top-bar"><span class="top-bar-title">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</span></div>
        <div class="red-hero">
            <h1>‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏Æ‡∏≤‡∏ö‡∏µ‡∏ü</h1>
            <div class="noti-btn" onclick="toggleNotiPanel()"
                style="background:rgba(255,255,255,0.25); width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; position:absolute; top:50%; right:15px; transform:translateY(-50%); z-index:10;">
                <span style="font-size:1.4rem; text-shadow:0 1px 2px rgba(0,0,0,0.2);">üîî</span>
                <span class="noti-badge"
                    style="display:none; position:absolute; top:-2px; right:-2px; background:#4CAF50; color:#fff; font-size:0.65rem; font-weight:bold; height:18px; min-width:18px; border-radius:9px; padding:0 4px; align-items:center; justify-content:center; border:2px solid #388E3C;">0</span>
            </div>
        </div>
        <div class="section-bar"><span>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</span></div>
        <div class="page-body" id="payment-container">
            <div id="payment-empty" style="text-align:center;padding:40px;color:#999;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞</div>
        </div>
    </div>

    <!-- ===== ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ ===== -->
    <div id="page-history" class="page">
        <div class="top-bar"><span class="top-bar-title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</span></div>
        <div class="red-hero">
            <h1>‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏Æ‡∏≤‡∏ö‡∏µ‡∏ü</h1>
            <div class="noti-btn" onclick="toggleNotiPanel()"
                style="background:rgba(255,255,255,0.25); width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; position:absolute; top:50%; right:15px; transform:translateY(-50%); z-index:10;">
                <span style="font-size:1.4rem; text-shadow:0 1px 2px rgba(0,0,0,0.2);">üîî</span>
                <span class="noti-badge"
                    style="display:none; position:absolute; top:-2px; right:-2px; background:#4CAF50; color:#fff; font-size:0.65rem; font-weight:bold; height:18px; min-width:18px; border-radius:9px; padding:0 4px; align-items:center; justify-content:center; border:2px solid #388E3C;">0</span>
            </div>
        </div>
        <div class="section-bar"><span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</span><span id="history-date-label"></span></div>
        <div class="page-body">
            <div id="calendar-container"></div>
            <div id="history-container"></div>
        </div>
    </div>

    <!-- ===== ‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ===== -->
    <div id="page-account" class="page">
        <div class="top-bar"><span class="top-bar-title">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span></div>
        <div class="red-hero">
            <h1>‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏Æ‡∏≤‡∏ö‡∏µ‡∏ü</h1>
        </div>
        <div class="page-body">
            <div class="account-card">
                <div class="account-avatar">üç≥</div>
                <div class="account-name" id="acc-name">-</div>
                <div class="account-role" id="acc-role">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div>
                <button class="btn btn-red btn-full" onclick="logout()" style="margin-top:16px;">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>
    </div>

    <!-- ===== BOTTOM NAV ===== -->
    <div class="bottom-nav">
        <button class="nav-item active" onclick="showTab('page-orders',this)">
            <span class="nav-icon">üìã</span><span class="nav-label">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</span>
        </button>
        <button class="nav-item" onclick="showTab('page-payment',this)">
            <span class="nav-icon">üí∞</span><span class="nav-label">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</span>
        </button>
        <button class="nav-item" onclick="showTab('page-history',this)">
            <span class="nav-icon">üïê</span><span class="nav-label">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</span>
        </button>
        <button class="nav-item" onclick="showTab('page-account',this)">
            <span class="nav-icon">üë§</span><span class="nav-label">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span>
        </button>
    </div>

    <!-- Table Detail Modal -->
    <div id="table-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">‡πÇ‡∏ï‡πä‡∏∞ 1</h3>
                <button class="btn btn-sm btn-outline" style="border-color:#fff; color:#fff;"
                    onclick="closeModal()">X</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Orders go here -->
            </div>
            <div class="modal-footer" style="display:flex; justify-content:space-between; align-items:center; gap:8px;">
                <button id="btn-cancel-orders" onclick="cancelSelectedModalOrders()"
                    style="flex:0.4; padding:8px; font-size:0.85rem; background:#f44336; color:#fff; border:none; border-radius:12px; opacity:0.5; filter:grayscale(1);"
                    disabled>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
                <button class="btn-serve btn-full" id="btn-serve-all" onclick="serveAllOrders()" style="flex:1;">‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü
                    ‚úì</button>
            </div>
        </div>
    </div>


    <!-- Notification Panel -->
    <div id="noti-panel"
        style="display:none; width:280px; background:#fff; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,0.2); flex-direction:column; max-height:400px; overflow:hidden;">
        <div
            style="padding:12px 16px; background:#f8f9fa; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center;">
            <h4 style="margin:0; font-size:1rem; color:#333;">‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h4>
            <span style="font-size:0.8rem; color:#888; cursor:pointer; padding:4px;" onclick="toggleNotiPanel()">‡∏õ‡∏¥‡∏î
                X</span>
        </div>
        <div id="noti-list"
            style="padding:12px; overflow-y:auto; flex:1; display:flex; flex-direction:column; gap:8px;">
            <div style="text-align:center; color:#999; padding:20px 0; font-size:0.9rem;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà</div>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/staff.js"></script>
</body>

</html>